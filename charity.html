<!DOCTYPE html>
<html>
<head>
  <title>Charity Donation Tracker</title>
</head>
<body>

<h2>Charity Donation Tracker</h2>

<button id="connectBtn">Connect Wallet</button>
<p id="wallet">Not connected</p>

<h3>Total Donations</h3>
<p id="total">0 ETH</p>

<h3>Donate</h3>
<input type="number" id="amount" placeholder="Amount in ETH" />
<button id="donateBtn">Donate</button>

<script src="https://cdn.jsdelivr.net/npm/ethers@6.14.0/dist/ethers.umd.min.js"></script>

<script>
// ðŸ”´ PASTE YOUR CONTRACT ADDRESS HERE
const CONTRACT_ADDRESS = "0x13a03d2e289b08ed1331af806f8ce857a84e64d1";

// ðŸ”´ INLINE ABI (simple, safe)
const ABI = [
  {
    "inputs": [],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "inputs": [],
    "name": "donate",
    "outputs": [],
    "stateMutability": "payable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "totalDonations",
    "outputs": [
      { "internalType": "uint256", "name": "", "type": "uint256" }
    ],
    "stateMutability": "view",
    "type": "function"
  }
];

let provider, signer, contract;

document.getElementById("connectBtn").onclick = async () => {
  if (!window.ethereum) {
    alert("Install MetaMask");
    return;
  }

  await ethereum.request({ method: "eth_requestAccounts" });

  provider = new ethers.BrowserProvider(window.ethereum);
  signer = await provider.getSigner();

  contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);

  document.getElementById("wallet").innerText =
    "Connected: " + await signer.getAddress();

  loadTotal();
};

async function loadTotal() {
  const total = await contract.totalDonations();
  document.getElementById("total").innerText =
    ethers.formatEther(total) + " ETH";
}

document.getElementById("donateBtn").onclick = async () => {
  const amount = document.getElementById("amount").value;

  if (!amount || amount <= 0) {
    alert("Enter valid ETH amount");
    return;
  }

  const tx = await contract.donate({
    value: ethers.parseEther(amount)
  });

  await tx.wait();
  loadTotal();
};
</script>

</body>
</html>
